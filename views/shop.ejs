<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous" />
    <title>Shop</title>
  </head>
  <body>
    <!-- navbar -->
    <nav class="navbar is-danger text-decoration-none" role="navigation" aria-label="main navigation">
      <div class="navbar-brand">
        <a class="navbar-item" href="#">
          <img src="https://bulma.io/images/bulma-logo.png" width="112" height="28" />
        </a>

        <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" data-target="navbarBasicExample">
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
      </div>

      <div id="navbarBasicExample" class="navbar-menu">
        <div class="navbar-start">
          <a class="navbar-item" href="/home"> Home </a>

          <a class="navbar-item" href="/shop"> Shop </a>

          <div class="navbar-item has-dropdown is-hoverable">
            <a class="navbar-link"> More </a>

            <div class="navbar-dropdown">
              <a class="navbar-item"> About </a>
              <a class="navbar-item"> Jobs </a>
              <a class="navbar-item"> Contact </a>
              <hr class="navbar-divider" />
              <a class="navbar-item"> Report an issue </a>
            </div>
          </div>
        </div>

        <!-- <div class="navbar-end">
          <div class="navbar-item">
            <div class="buttons">
              <a class="button is-primary">
                <strong>Sign up</strong>
              </a>
              <a class="button is-light"> Log in </a>
            </div>
          </div>
        </div> -->
      </div>
    </nav>
    <!-- navbar end -->
    <!-- tabel -->
    <h1 class="container text-center">SHOP</h1>
    <table class="table is-justify-conten-center container mt-5">
      <thead>
        <tr class="head is-danger">
          <th>Id</th>
          <th>Nama Barang</th>
          <th>Stock Barang</th>
          <th>Harga Barang</th>
          <th>Gambar Barang</th>
          <th class="text-center">Action</th>
        </tr>
      </thead>
      <tbody>
        <% for (let result of results) { %>
        <tr>
          <td><%= result.id_barang %></td>
          <td><%= result.nama_barang %></td>
          <td><%= result.stock_barang %></td>
          <td class="harga"><%= result.harga_barang %></td>
          <td><img src="/img/<%= result.foto_barang %> " alt="<%= result.foto_barang %>" width="50px" height="50px" /></td>
          <td>
            <a href="/update/<%= result.id_barang%>" class="btn-info">UPDATE</a>
          </td>
          <td>
            <a href="/delete/<%= result.id_barang%>" class="btn-danger">Delete</a>
          </td>
        </tr>
        <% } %>
      </tbody>
    </table>
    <!-- tabel end -->
    <a href="/add" class="container ms-5 mt-3 text-decoration-none">Tambah produk</a>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <!-- my script -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const hargaElements = document.querySelectorAll(".harga");

        hargaElements.forEach(function (element) {
          const harga = parseInt(element.textContent);
          const hargaFormat = new Intl.NumberFormat("id-ID", {
            style: "currency",
            currency: "IDR",
          }).format(harga);

          element.textContent = hargaFormat;
        });
      });
    </script>
  </body>
</html>
